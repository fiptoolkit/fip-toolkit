<!DOCTYPE html>
<!--
 * Ce code source est soumis aux termes de la licence publique Mozilla,
 * version 2.0. Si une copie de la MPL n'a pas Ã©tÃ© distribuÃ©e avec ce fichier,
 * vous pouvez en obtenir une Ã  l'adresse http://mozilla.org/MPL/2.0/.
 * 
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 * 
 * Go2Econtact - Wizard de configuration guidÃ©e
 * Interface web pour crÃ©er des rÃ¨gles d'inclusion/exclusion
 * 
 * @author HervÃ© ROUVROY
 * @copyright 2025 HervÃ© ROUVROY
 * @license MPL-2.0
 * @version 1.0
 * @see https://fiptoolkit.github.io/fip-toolkit/go2econtact/
 *
 * CONTEXTE MÃ‰TIER :
 * Wizard guidÃ© pour aider les utilisateurs non-techniques Ã  configurer
 * les rÃ¨gles d'inclusion/exclusion de l'extension Go2Econtact.
 * Permet de crÃ©er une configuration exportable vers l'extension Thunderbird.
-->
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistant Configuration - Go2Econtact</title>
    
    <!-- Styles communs + spÃ©cifiques wizard -->
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="css/wizard.css">
</head>
<body>
    <div class="container">
        <!-- En-tÃªte -->
        <header class="wizard-header">
            <h1>ğŸ§™â€â™‚ï¸ Assistant de Configuration Go2Econtact</h1>
            <p class="subtitle">CrÃ©ez vos rÃ¨gles d'accusÃ©s de rÃ©ception en quelques Ã©tapes simples</p>
        </header>

        <!-- Barre de progression -->
        <div class="progress-bar">
            <div class="progress-step active" data-step="1">
                <div class="progress-step-circle">1</div>
                <div class="progress-step-label">Domaine interne</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="progress-step-circle">2</div>
                <div class="progress-step-label">Exclusions</div>
            </div>
            <div class="progress-step" data-step="3">
                <div class="progress-step-circle">3</div>
                <div class="progress-step-label">Inclusions</div>
            </div>
            <div class="progress-step" data-step="4">
                <div class="progress-step-circle">4</div>
                <div class="progress-step-label">RÃ©capitulatif</div>
            </div>
        </div>

        <!-- Formulaire wizard -->
        <form id="wizard-form" class="wizard-form">
            
            <!-- Ã‰TAPE 1 : Domaine interne -->
            <div class="wizard-step active" data-step="1">
                <h2>ğŸ“§ Votre domaine interne</h2>
                <p class="step-description">
                    Le domaine interne correspond Ã  votre organisation (entreprise, association, etc.).
                    Les emails de ce domaine ne recevront <strong>pas</strong> d'accusÃ© de rÃ©ception par dÃ©faut,
                    sauf si vous les ajoutez explicitement aux inclusions.
                </p>

                <div class="form-group">
                    <label for="internalDomain">
                        Domaine de votre organisation
                        <span class="optional">(optionnel)</span>
                    </label>
                    <input 
                        type="text" 
                        id="internalDomain" 
                        name="internalDomain"
                        placeholder="exemple : societe.fr ou *.societe.fr"
                        class="form-control"
                    >
                    <small class="form-hint">
                        ğŸ’¡ Utilisez <code>*.domaine.fr</code> pour inclure tous les sous-domaines
                        (ex: <code>paris.societe.fr</code>, <code>lyon.societe.fr</code>)
                    </small>
                </div>

                <div class="examples-box">
                    <h4>ğŸ“š Exemples</h4>
                    <ul>
                        <li><code>entreprise.fr</code> â†’ Bloque uniquement <em>@entreprise.fr</em></li>
                        <li><code>*.entreprise.fr</code> â†’ Bloque <em>@paris.entreprise.fr</em>, <em>@lyon.entreprise.fr</em>, etc.</li>
                    </ul>
                </div>

                <div class="info-box">
                    <strong>â„¹ï¸ Pourquoi bloquer les emails internes ?</strong>
                    <p>
                        Par dÃ©faut, on Ã©vite d'envoyer des accusÃ©s de rÃ©ception aux collÃ¨gues de votre
                        organisation pour ne pas encombrer inutilement les boÃ®tes email internes.
                        Les AR sont rÃ©servÃ©s aux contacts externes (clients, partenaires, etc.).
                    </p>
                </div>
            </div>

            <!-- Ã‰TAPE 2 : Exclusions -->
            <div class="wizard-step" data-step="2">
                <h2>ğŸš« Qui ne recevra JAMAIS d'accusÃ© de rÃ©ception ?</h2>
                <p class="step-description">
                    DÃ©finissez les adresses, domaines ou patterns qui ne doivent <strong>jamais</strong>
                    recevoir d'accusÃ© de rÃ©ception automatique.
                </p>

                <!-- Exclusion par domaine -->
                <div class="form-section">
                    <h3>ğŸŒ Domaines Ã  exclure</h3>
                    <p class="section-description">
                        Bloquez tous les emails d'un domaine complet (ex: tous les emails de <em>publicite.fr</em>)
                    </p>
                    
                    <div class="form-group">
                        <label for="exclusionDomains">
                            Domaines Ã  exclure
                            <span class="optional">(un par ligne)</span>
                        </label>
                        <textarea 
                            id="exclusionDomains" 
                            name="exclusionDomains"
                            rows="4"
                            class="form-control"
                            placeholder="Exemple :&#10;spam.com&#10;publicite.fr&#10;*.partenaire.net"
                        ></textarea>
                        <small class="form-hint">
                            ğŸ’¡ Vous pouvez utiliser <code>*.</code> pour exclure tous les sous-domaines
                        </small>
                    </div>
                </div>

                <!-- Exclusion par adresse -->
                <div class="form-section">
                    <h3>âœ‰ï¸ Adresses spÃ©cifiques Ã  exclure</h3>
                    <p class="section-description">
                        Bloquez des adresses email prÃ©cises (ex: <em>robot@exemple.com</em>)
                    </p>
                    
                    <div class="form-group">
                        <label for="exclusionAddresses">
                            Adresses Ã  exclure
                            <span class="optional">(une par ligne)</span>
                        </label>
                        <textarea 
                            id="exclusionAddresses" 
                            name="exclusionAddresses"
                            rows="4"
                            class="form-control"
                            placeholder="Exemple :&#10;contact@spam.com&#10;noreply@newsletter.fr&#10;robot@service.net"
                        ></textarea>
                    </div>
                </div>

                <!-- Exclusion par pattern -->
                <div class="form-section">
                    <h3>ğŸ” Patterns automatiques Ã  exclure</h3>
                    <p class="section-description">
                        Bloquez des types d'emails automatiques (ex: tous les <em>noreply@*</em>)
                    </p>
                    
                    <div class="form-group">
                        <label for="exclusionPatterns">
                            Patterns Ã  exclure
                            <span class="optional">(un par ligne)</span>
                        </label>
                        <textarea 
                            id="exclusionPatterns" 
                            name="exclusionPatterns"
                            rows="4"
                            class="form-control"
                            placeholder="Exemple :&#10;noreply@*&#10;no-reply@*&#10;postmaster@*"
                        ></textarea>
                        <small class="form-hint">
                            ğŸ’¡ Utilisez <code>*</code> comme joker (ex: <code>noreply@*</code> bloque tous les noreply)
                        </small>
                    </div>

                    <div class="patterns-presets">
                        <h4>ğŸ“‹ Patterns recommandÃ©s</h4>
                        <button type="button" class="btn-preset" data-action="add-default-patterns">
                            â• Ajouter les patterns par dÃ©faut
                        </button>
                        <ul class="presets-list">
                            <li><code>noreply@*</code> - Emails "ne pas rÃ©pondre"</li>
                            <li><code>no-reply@*</code> - Variante avec tiret</li>
                            <li><code>postmaster@*</code> - Administrateurs serveurs mail</li>
                            <li><code>mailer-daemon@*</code> - Emails d'erreur automatiques</li>
                        </ul>
                    </div>
                </div>

                <div class="info-box">
                    <strong>â„¹ï¸ DiffÃ©rence domaine / adresse / pattern ?</strong>
                    <ul>
                        <li><strong>Domaine</strong> : Bloque TOUS les emails d'un domaine (ex: <code>spam.com</code> bloque <em>contact@spam.com</em>, <em>info@spam.com</em>, etc.)</li>
                        <li><strong>Adresse</strong> : Bloque UNE adresse prÃ©cise (ex: <code>robot@service.fr</code>)</li>
                        <li><strong>Pattern</strong> : Bloque selon un motif (ex: <code>noreply@*</code> bloque tous les noreply de tous les domaines)</li>
                    </ul>
                </div>
            </div>

            <!-- Ã‰TAPE 3 : Inclusions -->
            <div class="wizard-step" data-step="3">
                <h2>â­ Qui recevra TOUJOURS un accusÃ© de rÃ©ception ?</h2>
                <p class="step-description">
                    Ces adresses/domaines ont la <strong>prioritÃ© ABSOLUE</strong> : elles recevront
                    un AR mÃªme si elles sont dans les exclusions ou le domaine interne.
                </p>

                <div class="warning-box">
                    <strong>âš ï¸ Important :</strong> Les inclusions annulent TOUTES les autres rÃ¨gles.
                    Utilisez-les pour crÃ©er des exceptions ciblÃ©es.
                </div>

                <!-- Inclusion par adresse -->
                <div class="form-section">
                    <h3>âœ‰ï¸ Adresses qui recevront TOUJOURS un AR</h3>
                    <p class="section-description">
                        Ajoutez des adresses qui doivent recevoir un AR mÃªme si elles sont bloquÃ©es ailleurs
                    </p>
                    
                    <div class="form-group">
                        <label for="inclusionAddresses">
                            Adresses prioritaires
                            <span class="optional">(une par ligne)</span>
                        </label>
                        <textarea 
                            id="inclusionAddresses" 
                            name="inclusionAddresses"
                            rows="4"
                            class="form-control"
                            placeholder="Exemple :&#10;patron@entreprise.fr&#10;vip@client.com&#10;contact-urgent@partenaire.net"
                        ></textarea>
                    </div>
                </div>

                <!-- Inclusion par domaine -->
                <div class="form-section">
                    <h3>ğŸŒ Domaines qui recevront TOUJOURS un AR</h3>
                    <p class="section-description">
                        Forcez l'envoi d'AR pour tous les emails d'un domaine
                    </p>
                    
                    <div class="form-group">
                        <label for="inclusionDomains">
                            Domaines prioritaires
                            <span class="optional">(un par ligne)</span>
                        </label>
                        <textarea 
                            id="inclusionDomains" 
                            name="inclusionDomains"
                            rows="4"
                            class="form-control"
                            placeholder="Exemple :&#10;client-vip.com&#10;*.partenaire-strategique.fr"
                        ></textarea>
                    </div>
                </div>

                <div class="examples-box">
                    <h4>ğŸ“š Cas d'usage typiques</h4>
                    <ul>
                        <li><strong>Patron dans domaine interne</strong> : <code>patron@entreprise.fr</code> reÃ§oit un AR mÃªme si <code>entreprise.fr</code> est bloquÃ©</li>
                        <li><strong>Client VIP</strong> : <code>vip@client.com</code> reÃ§oit toujours un AR</li>
                        <li><strong>Test interne</strong> : <code>test@entreprise.fr</code> pour vÃ©rifier que l'extension fonctionne</li>
                    </ul>
                </div>
            </div>

            <!-- Ã‰TAPE 4 : RÃ©capitulatif -->
            <div class="wizard-step" data-step="4">
                <h2>âœ… RÃ©capitulatif de votre configuration</h2>
                <p class="step-description">
                    VÃ©rifiez votre configuration avant de l'exporter vers l'extension Go2Econtact
                </p>

                <div id="summary-content" class="summary-content">
                    <!-- GÃ©nÃ©rÃ© dynamiquement par JS -->
                </div>

                <div class="export-section">
                    <h3>ğŸ’¾ Exporter votre configuration</h3>
                    <p>TÃ©lÃ©chargez votre configuration pour l'importer dans l'extension Thunderbird</p>
                    
                    <div class="export-buttons">
                        <button type="button" class="btn-primary" id="btnExportJson">
                            ğŸ“¥ TÃ©lÃ©charger la configuration (JSON)
                        </button>
                        <button type="button" class="btn-secondary" id="btnCopyJson">
                            ğŸ“‹ Copier dans le presse-papier
                        </button>
                    </div>

                    <div class="export-instructions">
                        <h4>ğŸ“– Comment importer dans Thunderbird ?</h4>
                        <ol>
                            <li>TÃ©lÃ©chargez le fichier JSON ci-dessus</li>
                            <li>Ouvrez Thunderbird</li>
                            <li>Allez dans les <strong>PrÃ©fÃ©rences Go2Econtact</strong></li>
                            <li>Cliquez sur <strong>"Importer configuration"</strong></li>
                            <li>SÃ©lectionnez le fichier tÃ©lÃ©chargÃ©</li>
                        </ol>
                    </div>
                </div>

                <div class="test-section">
                    <h3>ğŸ§ª Tester votre configuration</h3>
                    <p>Avant d'exporter, testez votre configuration avec le simulateur</p>
                    
                    <a href="simulateur.php" class="btn-secondary" target="_blank">
                        ğŸ”¬ Ouvrir le simulateur
                    </a>
                </div>
            </div>

        </form>

        <!-- Boutons de navigation -->
        <div class="wizard-navigation">
            <button type="button" class="btn-secondary" id="btnPrevious" style="display: none;">
                â† PrÃ©cÃ©dent
            </button>
            
            <button type="button" class="btn-primary" id="btnNext">
                Suivant â†’
            </button>
            
            <button type="button" class="btn-success" id="btnFinish" style="display: none;">
                âœ“ Terminer
            </button>
        </div>

        <!-- Footer Navigation UnifiÃ© -->
        <div class="footer-nav">
            <h3>ğŸ“š Ressources complÃ©mentaires</h3>
            <div class="nav-links-grid">
                <a href="../index.html" class="nav-button">ğŸ  Accueil</a>
                <a href="../tutoriel.html" class="nav-button">ğŸš€ Tutoriel</a>
                <a href="../documentation.html" class="nav-button">ğŸ“– Documentation</a>
                <a href="../faq.html" class="nav-button">â“ FAQ</a>
                <a href="../changelog.html" class="nav-button">ğŸ“‹ Changelog</a>
                <a href="../legal.html" class="nav-button">ğŸ“„ Informations lÃ©gales</a>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/wizard.js"></script>
</body>
</html>